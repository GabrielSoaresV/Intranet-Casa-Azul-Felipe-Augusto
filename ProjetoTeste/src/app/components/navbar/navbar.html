<nav class="navbar">
  <div class="navbar-container">

    <!-- 游댳 Marca clic치vel -->
    <div class="navbar-brand" (click)="goHome()">
      <mat-icon class="brand-icon">home</mat-icon>
      <h2>Sistema de Demandas</h2>
    </div>

    <!-- 游댳 Navega칞칚o com 칤cones -->
    <div class="navbar-links">

      <!-- Demandas -->
      <a
        routerLink="/demands"
        routerLinkActive="active"
        *ngIf="auth.hasAnyRole(['ADMIN','ATTENDANT'])"
        title="Painel de Demandas"
      >
        <mat-icon>dashboard</mat-icon>
      </a>

      <!-- Cidad칚os -->
      <a
        routerLink="/profile-list"
        routerLinkActive="active"
        *ngIf="auth.hasAnyRole(['ADMIN','ATTENDANT'])"
        title="Usu치rios"
      >
        <mat-icon>groups</mat-icon>
      </a>

      <!-- 游빌 Novo: Cadastrar Usu치rio (somente ADMIN) -->
      <a
        routerLink="/register-private"
        routerLinkActive="active"
        *ngIf="auth.hasRole('ADMIN')"
        title="Cadastrar Usu치rio"
      >
        <mat-icon>person_add</mat-icon>
      </a>

      <!-- Cadastrar demanda -->
      <a
        routerLink="/demand-register"
        routerLinkActive="active"
        *ngIf="auth.hasAnyRole(['ADMIN','ATTENDANT', 'CITIZEN'])"
        title="Cadastrar Demanda"
      >
        <mat-icon>post_add</mat-icon>
      </a>

      <!-- Minhas Demandas -->
      <a
        routerLink="/demands-list"
        routerLinkActive="active"
        *ngIf="auth.hasAnyRole(['ADMIN','ATTENDANT','CITIZEN'])"
        title="Minhas Demandas"
      >
        <mat-icon>assignment</mat-icon>
      </a>

      <!-- Hist칩rico -->
      <a
        routerLink="/history"
        routerLinkActive="active"
        *ngIf="auth.hasRole('ADMIN')"
        title="Hist칩rico"
      >
        <mat-icon>history</mat-icon>
      </a>
    </div>

    <!-- 游댳 Usu치rio -->
    <div class="navbar-user">
      <button class="user-button" (click)="toggleMenu()">
        <div class="user-avatar">
          <img
            [src]="avatarUrl"
            alt="{{ profile?.name }}"
            class="avatar-img"
            (error)="avatarUrl = 'https://ui-avatars.com/api/?name=' + (profile?.name || 'Usu치rio') + '&background=667eea&color=fff&bold=true'"
          />
        </div>
        <span class="user-name">{{ profile?.name || 'Usu치rio' }}</span>
      </button>

      <div class="user-menu" [class.open]="menuOpen">
        <a
          routerLink="/profile"
          (click)="toggleMenu()"
          *ngIf="auth.hasAnyRole(['ADMIN','ATTENDANT','CITIZEN'])"
        >
          <mat-icon>account_circle</mat-icon> Meu Perfil
        </a>
        <button (click)="logout()">
          <mat-icon>logout</mat-icon> Sair
        </button>
      </div>
    </div>
  </div>
</nav>
