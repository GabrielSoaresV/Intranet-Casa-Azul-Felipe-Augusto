<nav class="navbar">
  <div class="navbar-container">
    <div class="navbar-brand">
      <h2>Sistema de Demandas</h2>
    </div>

    <div class="navbar-links">
      <!-- Home/Demandas (lista) → ADMIN e ATTENDANT -->
      <a routerLink="/home" routerLinkActive="active" *ngIf="auth.hasAnyRole(['ADMIN','ATTENDANT'])">Demandas</a>

      <!-- Cidadãos (profile-list) → ADMIN e ATTENDANT -->
      <a routerLink="/profile-list" routerLinkActive="active" *ngIf="auth.hasAnyRole(['ADMIN','ATTENDANT'])">Cidadãos</a>

      <!-- Cadastrar demanda → TODOS (logados) -->
      <a routerLink="/demand-register" routerLinkActive="active" *ngIf="auth.hasAnyRole(['ADMIN','ATTENDANT','CITIZEN'])">Cadastrar</a>

      <!-- Histórico → somente ADMIN -->
      <a routerLink="/history" routerLinkActive="active" *ngIf="auth.hasRole('ADMIN')">Histórico</a>
    </div>

    <div class="navbar-user">
      <button class="user-button" (click)="toggleMenu()">
        <div class="user-avatar">
          <img
            [src]="avatarUrl"
            alt="{{ profile?.name }}"
            class="avatar-img"
            (error)="avatarUrl = 'https://ui-avatars.com/api/?name=' + (profile?.name || 'Usuário') + '&background=667eea&color=fff&bold=true'"
          />
        </div>
        <span class="user-name">{{ profile?.name || 'Usuário' }}</span>
      </button>

      <div class="user-menu" [class.open]="menuOpen">
        <!-- Meu Perfil → TODOS (logados) -->
        <a routerLink="/profile" (click)="toggleMenu()" *ngIf="auth.hasAnyRole(['ADMIN','ATTENDANT','CITIZEN'])">Meu Perfil</a>
        <button (click)="logout()">Sair</button>
      </div>
    </div>
  </div>
</nav>
