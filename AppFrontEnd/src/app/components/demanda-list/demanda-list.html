<h4>Lista de Demandas</h4>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>ID</th>
      <th>Título</th>
      <th>Descrição</th>
      <th>Status</th>
      <th>Alterar Status</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let demanda of demandas">
      <td>{{ demanda.id }}</td>
      <td>{{ demanda.titulo }}</td>
      <td>{{ demanda.descricao }}</td>
      <td>
        <span [style.color]="getStatusColor(demanda.status)">
          {{ demanda.status }}
        </span>
      </td>
      <td>
        <!-- Botões para Aberta -->
        <ng-container *ngIf="demanda.status === 'Aberta'">
          <button class="btn btn-sm btn-success me-1" (click)="alterarStatus(demanda, 'atender')">Atender</button>
          <button class="btn btn-sm btn-warning" (click)="alterarStatus(demanda, 'cancelar')">Cancelar</button>
        </ng-container>

        <!-- Botões para Não Concluída -->
        <ng-container *ngIf="demanda.status === 'Não Concluída'">
          <button class="btn btn-sm btn-success me-1" (click)="alterarStatus(demanda, 'atender')">Atender</button>
        </ng-container>

        <!-- Botões para Em Andamento -->
        <ng-container *ngIf="demanda.status === 'Em Andamento'">
          <button class="btn btn-sm btn-success me-1" (click)="alterarStatus(demanda, 'finalizar')">Concluir</button>
          <button class="btn btn-sm btn-warning" (click)="alterarStatus(demanda, 'devolver')">Devolver</button>
        </ng-container>

        <!-- Botão excluir para Concluída ou Cancelada -->
        <ng-container *ngIf="demanda.status === 'Concluída' || demanda.status === 'Cancelada'">
          <button class="btn btn-sm btn-danger" (click)="excluir(demanda)">Excluir</button>
        </ng-container>
      </td>
    </tr>
  </tbody>
</table>
