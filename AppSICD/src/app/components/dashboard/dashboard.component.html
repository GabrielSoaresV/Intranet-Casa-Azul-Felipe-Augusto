<app-navbar></app-navbar>

<div class="dashboard-container">
  <!-- Cabeçalho -->
  <div class="dashboard-header">
    <h1>Demandas</h1>

    <div class="filter-buttons">
      <button
        [class.active]="selectedStatus === 'all'"
        (click)="onFilterChange('all')"
      >
        Todas
      </button>
      <button
        [class.active]="selectedStatus === 'pending'"
        (click)="onFilterChange('pending')"
      >
        Pendentes
      </button>
      <button
        [class.active]="selectedStatus === 'in_progress'"
        (click)="onFilterChange('in_progress')"
      >
        Em Andamento
      </button>
      <button
        [class.active]="selectedStatus === 'completed'"
        (click)="onFilterChange('completed')"
      >
        Concluídas
      </button>
    </div>
  </div>

  <!-- Loading -->
  <div class="loading" *ngIf="loading">
    Carregando demandas...
  </div>

  <!-- Lista de demandas -->
  <div class="demands-grid" *ngIf="!loading && filteredDemands.length > 0">
    <div
      *ngFor="let demand of filteredDemands"
      class="demand-card"
      (click)="viewDemand(demand.id)"
    >
      <div class="demand-header">
        <span class="demand-status" [ngClass]="demand.status.toLowerCase()">
          {{ getStatusText(demand.status) }}
        </span>
        <span class="demand-priority" [ngClass]="demand.priority.toLowerCase()">
          {{ getPriorityText(demand.priority) }}
        </span>
      </div>

      <h3 class="demand-title">{{ demand.title }}</h3>
      <p class="demand-description">{{ demand.description }}</p>

      <div class="demand-footer">
        <div class="demand-creator">
          <strong>Criador:</strong> {{ demand.creator?.name || 'Desconhecido' }}
        </div>
        <div class="demand-date">
          {{ formatDate(demand.createdAt) }}
        </div>
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <div class="empty-state" *ngIf="!loading && filteredDemands.length === 0">
    <p>Nenhuma demanda encontrada</p>
  </div>
</div>
