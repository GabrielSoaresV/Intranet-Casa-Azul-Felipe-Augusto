<app-navbar></app-navbar>

<div class="profile-container">
  <div class="profile-header">
    <h1>Meu Perfil</h1>
  </div>

  <div class="loading" *ngIf="loading">
    Carregando perfil...
  </div>

  <div class="profile-card" *ngIf="!loading && profile">
    <div class="profile-avatar-section">
      <div class="profile-avatar">
        {{ profile.name.charAt(0).toUpperCase() }}
      </div>
      <h2>{{ profile.name }}</h2>
      <p class="profile-role">{{ getRoleText(profile.role) }}</p>
    </div>

    <div class="profile-info" *ngIf="!editMode">
      <div class="info-row">
        <label>Nome:</label>
        <span>{{ profile.name }}</span>
      </div>

      <div class="info-row">
        <label>Email:</label>
        <span>{{ profile.email }}</span>
      </div>

      <div class="info-row">
        <label>Função:</label>
        <span>{{ getRoleText(profile.role) }}</span>
      </div>

      <div class="info-row">
        <label>Membro desde:</label>
        <span>{{ formatDate(profile.createdAt) }}</span>
      </div>

      <div class="success-message" *ngIf="successMessage">
        {{ successMessage }}
      </div>

      <button class="btn-edit" (click)="enableEdit()">
        Editar Perfil
      </button>
    </div>

    <div class="profile-edit" *ngIf="editMode">
      <div class="form-group">
        <label for="name">Nome:</label>
        <input
          type="text"
          id="name"
          [(ngModel)]="editedProfile.name"
          placeholder="Seu nome completo"
        />
      </div>

      <div class="form-group">
        <label for="email">Email:</label>
        <input
          type="email"
          id="email"
          [(ngModel)]="editedProfile.email"
          placeholder="seu@email.com"
        />
      </div>

      <div class="form-actions">
        <button class="btn-save" (click)="saveProfile()" [disabled]="saving">
          {{ saving ? 'Salvando...' : 'Salvar' }}
        </button>
        <button class="btn-cancel" (click)="cancelEdit()" [disabled]="saving">
          Cancelar
        </button>
      </div>
    </div>
  </div>
</div>
