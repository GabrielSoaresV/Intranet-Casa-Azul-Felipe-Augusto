<table class="tabela-registros">
  <thead>
    <tr>
      <th></th>
      <th>CNPJ</th>
      <th>Empresa</th>
      <th>Email</th>
      <th>Telefone</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th> 
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let empresa of empresas; let i = index">
      <tr (click)="toggleDetalhes(i)">
        <td></td>
        <td>{{ formatarCnpj(empresa.cnpj) }}</td>
        <td>{{ empresa.nomeEmpresa }}</td>
        <td>{{ empresa.emailEmpresa }}</td>
        <td>{{ empresa.telefoneEmpresa }}</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td class="botoes">
          <button class="btn-confirmar" (click)="$event.stopPropagation(); confirmar(empresa)">Enviar</button>
          <button class="btn-editar" (click)="$event.stopPropagation(); editarRegistro(empresa)">Editar</button>
          <button class="btn-excluir" (click)="excluir(empresa.cnpj); $event.stopPropagation();">Excluir</button>
        </td>
      </tr>
      <tr *ngIf="registroExpandido === i" class="linha-detalhes">
        <td colspan="11">
          <div class="detalhes-container" style="display: flex; gap: 20px; padding: 10px; background-color: #f0f4ff; border: 1px solid #ccc; border-radius: 8px;">
            <div><strong>Nome do Supervisor de RH:</strong><br>{{ empresa.rhNomeResponsavel || 'Não informado' }}</div>
            <div><strong>Email do Supervisor de RH:</strong><br>{{ empresa.rhEmailResponsavel || 'Não informado' }}</div>
          </div>
        </td>
      </tr>
    </ng-container>
    <tr *ngIf="empresas.length === 0">
      <td colspan="11" style="text-align:center;">Nenhuma empresa cadastrada.</td>
    </tr>
  </tbody>
</table>
<!-- Modal de edição para Empresa -->
<div class="modal" *ngIf="registroEditando">
  <div class="modal-conteudo">
    <h2>Edição de Registro - Empresa</h2>
    <form>
      <label for="cnpj">CNPJ:
        <input id="cnpj" type="text" [(ngModel)]="registroEditando.cnpj" name="cnpj" />
      </label>

      <label for="nomeEmpresa">Nome da Empresa:
        <input id="nomeEmpresa" type="text" [(ngModel)]="registroEditando.nomeEmpresa" name="nomeEmpresa" />
      </label>

      <label for="emailEmpresa">Email da Empresa:
        <input id="emailEmpresa" type="email" [(ngModel)]="registroEditando.emailEmpresa" name="emailEmpresa" />
      </label>

      <label for="telefoneEmpresa">Telefone da Empresa:
        <input id="telefoneEmpresa" type="text" [(ngModel)]="registroEditando.telefoneEmpresa" name="telefoneEmpresa" />
      </label>

      <label for="rhNomeResponsavel">Nome do Supervisor de RH:
        <input id="rhNomeResponsavel" type="text" [(ngModel)]="registroEditando.rhNomeResponsavel" name="rhNomeResponsavel" />
      </label>

      <label for="rhEmailResponsavel">Email do Supervisor de RH:
        <input id="rhEmailResponsavel" type="email" [(ngModel)]="registroEditando.rhEmailResponsavel" name="rhEmailResponsavel" />
      </label>

      <div class="botoes">
        <button type="button" (click)="salvarEdicao()">Salvar</button>
        <button type="button" (click)="fecharModal()">Cancelar</button>
      </div>
    </form>
  </div>
</div>
