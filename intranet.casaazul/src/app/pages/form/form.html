<table class="tabela-registros">
  <thead>
    <tr>
      <th></th>
      <th>Status</th> 
      <th>Nome</th>
      <th>Matrícula</th>
      <th>Contratação</th>
      <th>Rescisão</th>
      <th>Empresa</th>
      <th>Período</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let jovem of jovens; let i = index">
      <tr (click)="toggleDetalhes(i)">
        <td></td>
        <td class="status-cell">
          <div [ngClass]="getStatusClass(jovem)"></div>
        </td>
        <td>{{ jovem.nome }}</td>
        <td>{{ jovem.matricula }}</td>
        <td>{{ jovem.contratacao | date:'dd/MM/yyyy' }}</td>
        <td>{{ jovem.rescisao | date:'dd/MM/yyyy' }}</td> 
        <td>{{ jovem.empresa.nomeEmpresa }}</td>
        <td>{{ jovem.periodoAvaliacao }} meses</td>
        <td></td>
        <td class="botoes">
          <button class="btn-confirmar" (click)="$event.stopPropagation(); confirmar(jovem)">Enviar</button>
          <button class="btn-editar" (click)="$event.stopPropagation(); editarRegistro(jovem)">Editar</button>
          <button class="btn-excluir" (click)="excluir(jovem.matricula); $event.stopPropagation();">Excluir</button>
        </td>
      </tr>
      <tr *ngIf="registroExpandido === i" class="linha-detalhes">
        <td colspan="10">
          <div class="detalhes-container" style="display: flex; gap: 20px; padding: 10px; background-color: #f0f4ff; border: 1px solid #ccc; border-radius: 8px;">
            <div><strong>Email:</strong><br>{{ jovem.email || 'Não informado' }}</div>
            <div><strong>Telefone:</strong><br>{{ jovem.telefone || 'Não informado' }}</div>
            <div><strong>Nome Responsável:</strong><br>{{ jovem.nomeresponsavel || 'Não informado' }}</div>
            <div><strong>Telefone Responsável:</strong><br>{{ jovem.telefoneresponsavel || 'Não informado' }}</div>
            <div><strong>Observações:</strong><br>{{ jovem.observacoes || 'Sem observações' }}</div>
          </div>
        </td>
      </tr>
    </ng-container>
    <tr *ngIf="jovens.length === 0">
      <td colspan="9" style="text-align:center;">Nenhum registro encontrado.</td>
    </tr>
  </tbody>
</table>

<!-- Modal de edição -->
<div class="modal" *ngIf="registroEditando">
  <div class="modal-conteudo">
    <h2>Edição de Registro</h2>
    <form>
      <label for="nome">Nome:
        <input id="nome" type="text" [(ngModel)]="registroEditando.nome" name="nome" />
      </label>

      <label for="matricula">Matrícula:
        <input id="matricula" type="text" [(ngModel)]="registroEditando.matricula" name="matricula" />
      </label>

      <label for="contratacao">Data de Contratação:
        <input id="contratacao" type="date" [(ngModel)]="registroEditando.contratacao" name="contratacao" />
      </label>

      <label for="rescisao">Data de Rescisão:
        <input id="rescisao" type="date" [(ngModel)]="registroEditando.rescisao" name="rescisao" />
      </label>

      <label for="periodoAvaliacao">Período de Avaliação:
        <input id="periodoAvaliacao" type="number" [(ngModel)]="registroEditando.periodoAvaliacao" name="periodoAvaliacao" />
      </label>

      <label for="email">Email:
        <input id="email" type="email" [(ngModel)]="registroEditando.email" name="email" />
      </label>

      <label for="telefone">Telefone:
        <input id="telefone" type="text" [(ngModel)]="registroEditando.telefone" name="telefone" />
      </label>

      <label for="nomeresponsavel">Nome do Responsável:
        <input id="nomeresponsavel" type="text" [(ngModel)]="registroEditando.nomeresponsavel" name="nomeresponsavel" />
      </label>

      <label for="telefoneresponsavel">Telefone do Responsável:
        <input id="telefoneresponsavel" type="text" [(ngModel)]="registroEditando.telefoneresponsavel" name="telefoneresponsavel" />
      </label>

      <label for="observacoes">Observações:
        <textarea id="observacoes" [(ngModel)]="registroEditando.observacoes" name="observacoes"></textarea>
      </label>

      <div class="botoes">
        <button type="button" (click)="salvarEdicao()">Salvar</button>
        <button type="button" (click)="fecharModal()">Cancelar</button>
      </div>
    </form>
  </div>
</div>
